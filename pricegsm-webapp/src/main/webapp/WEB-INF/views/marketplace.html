<div class="row" ng-init="positions = {}">
    <div class="col-md-7">
        <!-- marketplace -->
        <div class="row">
            <!-- price lists -->
            <div class="col-sm-12">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <i class="fa fa-question fa-lg"
                           popover-placement="right"
                           popover-trigger="mouseenter"></i>
                        <span>Площадка</span>
                    </div>
                    <div class="panel-body">
                        <!-- new order -->
                        <form id="orderForm" ng-hide="isEmpty(order)">
                            <pg-order order="order"></pg-order>
                            <div class="row form-group">
                                <div class="col-sm-offset-1 col-sm-5">
                                    <button type="button" class="btn btn-default" tooltip="Обновить"
                                            ng-click="$parent.refresh()">
                                        <i class="fa fa-refresh"></i>
                                        <span>Обновить</span>
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="has-error form-group" ng-show="showSaveError">
                                    <div class="form-control">Данные не актуальны. Нажмите обновить.</div>
                                </div>

                                <button type="submit" class="btn btn-success" form="orderForm"
                                        ng-disabled="!formEnable(orderForm)" ng-click="save(orderForm, 'PREPARE')">
                                    <i class="fa fa-save"></i>
                                    <span>Сохранить</span>
                                </button>

                                <button type="button" class="btn btn-default" ng-click="review(order)"
                                        ng-disabled="!formEnable(orderForm)">
                                    <i class="fa fa-eye"></i>
                                    <span>Посмотреть</span>
                                </button>

                                <button type="submit" class="btn btn-success" form="orderForm"
                                        ng-disabled="!formEnable(orderForm)" ng-click="save(orderForm, 'SENT')">
                                    <i class="fa fa-save"></i>
                                    <span>Отправить</span>
                                </button>

                                <button type="reset" class="btn btn-default" data-dismiss="modal" aria-hidden="true"
                                        ng-click="cancel()"><i
                                        class="fa fa-times-circle fa-lg"></i> <span pg-text="button.close"></span>
                                </button>
                            </div>
                        </form>
                        <!-- price lists -->
                        <div ng-repeat="pricelist in pricelists | orderBy : [pricelist.user.name, pricelist.user.sellFromDate]"
                             ng-hide="pricelist.positions.length == 0">
                            <div class="row">
                                <div class="col-xs-2">
                                    <h4>{{pricelist.user.name}}</h4>
                                </div>
                                <div class="col-xs-offset-7 col-xs-2 text-right">
                                    <button type="button" class="btn btn-default" ng-click="review(order)"
                                            ng-disabled="!formEnable(orderForm)">
                                        <span>{{pricelist.sellFromDate}}</span>
                                    </button>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-xs-5 ng-hide" ng-show="pricelist.user.sellerPickup">
                                    самовывоз <b>{{pricelist.user.sellerPickupPlace}}</b>
                                    {{pricelist.user.sellerPickupFrom | date: 'HH:mm'}}-{{pricelist.user.sellerPickupTo
                                    | date: 'HH:mm'}}
                                </div>
                                <div class="col-xs-5 ng-hide" ng-show="pricelist.user.sellerDelivery">
                                    доставка <b>{{pricelist.user.sellerDeliveryPlace}}</b>
                                    {{pricelist.user.sellerDeliveryFrom |
                                    date:'HH:mm'}}-{{pricelist.user.sellerDeliveryTo | date: 'HH:mm'}}
                                </div>
                                <div class="col-xs-2">
                                    Гар. {{pricelist.user.sellerFreeRepair}}дн.
                                </div>
                            </div>
                            <pg-pricelist pricelist="pricelist" on-select-action="selectPriceListPosition(data)">
                            </pg-pricelist>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-5">
        <!-- statistic -->
        <!-- market prices  -->
        <pg-shop-prices
                on-date-change="updateStatistic(data)"
                prices="yandexPrices"
                currency="currency"
                product="product"></pg-shop-prices>

        <!-- charts -->
        <pg-price-delta-chart
                month-names="monthNames"
                chart="chart"
                currency="currency"></pg-price-delta-chart>
    </div>
</div>
